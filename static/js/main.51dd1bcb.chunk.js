(this["webpackJsonpreact_redux-list-of-posts"]=this["webpackJsonpreact_redux-list-of-posts"]||[]).push([[0],{14:function(e,t,n){e.exports=n(32)},25:function(e,t,n){},27:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(5),s=n.n(c),o=n(1),u=(n(25),n(3)),i=n.n(u),l=n(6),m=n(2),f=n(12),p=n(13),d=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"START_LOADING":return!0;case"FINISH_LOADING":return!1;default:return e}},E=n(4),_=function(e){return{type:"LOAD_SUCCESS",posts:e}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_SUCCESS":return t.posts;case"REMOVE_POST":return e.filter((function(e){return e.id!==t.id}));case"REMOVE_COMMENT":return e.map((function(e){return e.id===t.postId?Object(E.a)(Object(E.a)({},e),{},{comments:e.comments.filter((function(e){return e.id!==t.id}))}):e}));default:return e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_ERROR":return t.errorMessage;default:return e}},O=function(e){return{type:"FILTER_QUERY",filterQuery:e}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FILTER_QUERY":return t.filterQuery;default:return e}},h=function(e){return fetch("https://mate-academy.github.io/react_dynamic-list-of-posts/api"+e).then((function(e){return e.json()}))},g=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h("/users.json");case 2:return t=e.sent,e.next=5,h("/posts.json");case 5:return n=e.sent,e.next=8,h("/comments.json");case 8:return r=e.sent,a=n.map((function(e){return Object(E.a)(Object(E.a)({},e),{},{user:t.find((function(t){return t.id===e.userId})),comments:r.filter((function(t){return t.postId===e.id}))})})),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=Object(m.combineReducers)({posts:b,isLoading:d,errorMessage:v,filterQuery:y}),j=function(e){return e.posts},L=function(e){return e.isLoading},R=function(e){return e.errorMessage},C=function(e){return e.filterQuery},I=Object(m.createStore)(N,{posts:[],isLoading:!1,errorMessage:"",filterQuery:""},Object(f.composeWithDevTools)(Object(m.applyMiddleware)(p.a))),w=function(){var e=Object(o.b)(),t=Object(o.c)(L);return a.a.createElement("button",{type:"button",onClick:function(){return e(function(){var e=Object(l.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"START_LOADING"}),e.abrupt("return",g().then((function(e){return t(_(e))})).catch((function(){return t({type:"LOAD_ERROR",errorMessage:"Error occurred when loading data"})})).finally((function(){return t({type:"FINISH_LOADING"})})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},disabled:t},t?"Loading...":"Load")},M=(n(27),n(28),function(e){var t=e.name,n=e.email,r=e.address;return a.a.createElement("div",{className:"post__autor user"},a.a.createElement("div",{className:"user__info"},a.a.createElement("span",{className:"user__info-decor"},"Autor: "),t),a.a.createElement("div",{className:"user__info"},a.a.createElement("span",{className:"user__info-decor"},"Email: "),n),a.a.createElement("div",{className:"user__info"},a.a.createElement("span",{className:"user__info-decor"},"Address: "),r.city,","," ",r.street,","," ",r.suite))}),k=(n(29),n(30),function(e){var t=e.onClick,n=e.size;return a.a.createElement("button",{className:"remove-btn remove-btn--".concat(n),type:"button",onClick:t,"aria-label":"remove button"})}),A=function(e){var t=e.name,n=e.body,r=e.email,c=e.id,s=e.postId,u=Object(o.b)();return a.a.createElement("li",{className:"post__comment comment"},a.a.createElement("div",{className:"comment__header"},a.a.createElement("h3",{className:"comment__title"},t),a.a.createElement(k,{size:"small",onClick:function(){return u(function(e,t){return{type:"REMOVE_COMMENT",id:e,postId:t}}(c,s))}})),a.a.createElement("p",{className:"comment__text"},n),a.a.createElement("span",{className:"comment__email"},r))},S=function(e){var t=e.commentsList;return a.a.createElement("ul",null,t.map((function(e){return a.a.createElement(A,Object.assign({},e,{key:e.id}))})))},T=function(e){var t=e.title,n=e.body,r=e.user,c=e.comments,s=e.id,u=Object(o.b)();return a.a.createElement("li",{className:"post-list__post post"},a.a.createElement("div",{className:"post__header"},a.a.createElement("h2",{className:"post__title"},t),a.a.createElement(k,{size:"large",onClick:function(){return u(function(e){return{type:"REMOVE_POST",id:e}}(s))}})),a.a.createElement("p",{className:"post__text"},n),r&&a.a.createElement(M,Object.assign({},r,{key:r.id})),c&&a.a.createElement(S,{commentsList:c}))},x=function(e){var t=e.posts;return a.a.createElement("ul",null,t.map((function(e){return a.a.createElement(T,Object.assign({},e,{key:e.id}))})))},D=(n(31),function(){var e=Object(o.b)(),t=Object(o.c)(C),n=Object(r.useCallback)(function(e,t){var n;return function(){n&&clearTimeout(n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];n=setTimeout.apply(void 0,[e,t].concat(a))}}((function(t){e(O(t))}),1e3),[t]);return a.a.createElement("div",{className:"post-list__filter"},a.a.createElement("input",{type:"textarea",className:"post-list__filter-input",onChange:function(e){n(e.target.value)}}),a.a.createElement("button",{type:"button",onClick:function(){e(O(""))}},"Reset"))}),Q=function(){var e=Object(o.c)(R),t=Object(o.c)(j),n=Object(o.c)(C),c=Object(r.useMemo)((function(){return function(e,t){return t.filter((function(t){return(t.title+t.body).toLowerCase().includes(e.toLowerCase())}))}(n,t)}),[n,t]);return a.a.createElement("section",{className:"post-list"},a.a.createElement("h1",{className:"post-list__title"},"Dynamic list of posts"),0===t.length?a.a.createElement(a.a.Fragment,null,a.a.createElement(w,null),e&&a.a.createElement("p",null,e)):a.a.createElement(a.a.Fragment,null,a.a.createElement(D,null),a.a.createElement(x,{posts:c})))},F=function(){return a.a.createElement(o.a,{store:I},a.a.createElement(Q,null))};s.a.render(a.a.createElement(F,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.51dd1bcb.chunk.js.map